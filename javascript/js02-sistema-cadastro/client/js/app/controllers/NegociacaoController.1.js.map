{"version":3,"sources":["../../app-es6/controllers/NegociacaoController.1.js"],"names":["NegociacaoController","$","document","querySelector","bind","_data","_quantidade","_valor","_listaNegociacoes","ProxyFactory","create","ListaNegociacoes","_negociacoesView","update","model","NegociacoesView","_mensagem","Mensagem","_mensagemView","MensagemView","event","preventDefault","negociacao","_criaNegociacao","addNegociacao","setTexto","_updateNegociacaoView","_limpaFormulario","Negociacao","DateHelper","convertStringToData","value","focus","deletaNegociacoes","listaNegociacoes","mensagem"],"mappings":";;;;;;IAAMA,oB;AAEF,oCAAc;AAAA;;AAAA;;AACV,YAAIC,IAAIC,SAASC,aAAT,CAAuBC,IAAvB,CAA4BF,QAA5B,CAAR;AACA,aAAKG,KAAL,GAAaJ,EAAE,OAAF,CAAb;AACA,aAAKK,WAAL,GAAmBL,EAAE,aAAF,CAAnB;AACA,aAAKM,MAAL,GAAcN,EAAE,QAAF,CAAd;AACA;;AAEA,aAAKO,iBAAL,GAAyBC,aAAaC,MAAb,CACrB,IAAIC,gBAAJ,EADqB,EAErB,CAAC,UAAD,EAAa,SAAb,CAFqB,EAGrB,iBAAS;AACL,kBAAKC,gBAAL,CAAsBC,MAAtB,CAA6BC,KAA7B;AACH,SALoB,CAAzB;;AAOA,aAAKF,gBAAL,GAAwB,IAAIG,eAAJ,CAAoBd,EAAE,kBAAF,CAApB,CAAxB;AACA,aAAKW,gBAAL,CAAsBC,MAAtB,CAA6B,KAAKL,iBAAlC;;AAEA,aAAKQ,SAAL,GAAiBP,aAAaC,MAAb,CACb,IAAIO,QAAJ,EADa,EAEb,CAAC,OAAD,CAFa,EAGb,iBAAS;AACL,kBAAKC,aAAL,CAAmBL,MAAnB,CAA0BC,KAA1B;AACH,SALY,CAAjB;AAMA,aAAKI,aAAL,GAAqB,IAAIC,YAAJ,CAAiBlB,EAAE,eAAF,CAAjB,CAArB;AAEH;;;;iCAEQmB,K,EAAO;AACZA,kBAAMC,cAAN;;AAEA,gBAAIC,aAAa,KAAKC,eAAL,EAAjB;;AAEA,iBAAKf,iBAAL,CAAuBgB,aAAvB,CAAqCF,UAArC;AACA,iBAAKN,SAAL,CAAeS,QAAf,CAAwB,mCAAxB;;AAEA,iBAAKC,qBAAL,CAA2B,KAAKlB,iBAAhC,EAAmD,KAAKQ,SAAxD;AACA,iBAAKW,gBAAL;AACH;;;0CAEiB;AACd,mBAAO,IAAIC,UAAJ,CACHC,WAAWC,mBAAX,CAA+B,KAAKzB,KAAL,CAAW0B,KAA1C,CADG,EAEH,KAAKzB,WAAL,CAAiByB,KAFd,EAGH,KAAKxB,MAAL,CAAYwB,KAHT,CAAP;AAKH;;;2CAEkB;AACf,iBAAK1B,KAAL,CAAW0B,KAAX,GAAmB,EAAnB;AACA,iBAAKzB,WAAL,CAAiByB,KAAjB,GAAyB,CAAzB;AACA,iBAAKxB,MAAL,CAAYwB,KAAZ,GAAoB,GAApB;;AAEA,iBAAK1B,KAAL,CAAW2B,KAAX;AACH;;;4CAEmB;AAChB,iBAAKxB,iBAAL,CAAuByB,iBAAvB;AACA,iBAAKjB,SAAL,CAAeS,QAAf,CAAwB,kCAAxB;AACA,iBAAKC,qBAAL,CAA2B,KAAKlB,iBAAhC,EAAmD,KAAKQ,SAAxD;AACH;;;8CAEqBkB,gB,EAAkBC,Q,EAAU;AAC9C,iBAAKvB,gBAAL,CAAsBC,MAAtB,CAA6BqB,gBAA7B;AACA,iBAAKhB,aAAL,CAAmBL,MAAnB,CAA0BsB,QAA1B;AACH","file":"NegociacaoController.1.js","sourcesContent":["class NegociacaoController {\n\n    constructor() {\n        let $ = document.querySelector.bind(document);\n        this._data = $('#data');\n        this._quantidade = $('#quantidade');\n        this._valor = $('#valor');\n        //this._listaNegociacoes = new ListaNegociacoes();\n\n        this._listaNegociacoes = ProxyFactory.create(\n            new ListaNegociacoes(),\n            ['adiciona', 'esvazia'],\n            model => {\n                this._negociacoesView.update(model);\n            });\n\n        this._negociacoesView = new NegociacoesView($('#negociacoesView'));\n        this._negociacoesView.update(this._listaNegociacoes);\n\n        this._mensagem = ProxyFactory.create(\n            new Mensagem(),\n            ['texto'],\n            model => {\n                this._mensagemView.update(model);\n            });\n        this._mensagemView = new MensagemView($('#mensagemView'));\n\n    }\n\n    adiciona(event) {\n        event.preventDefault();\n\n        let negociacao = this._criaNegociacao();\n\n        this._listaNegociacoes.addNegociacao(negociacao);\n        this._mensagem.setTexto('Negociação adicionada com sucesso');\n\n        this._updateNegociacaoView(this._listaNegociacoes, this._mensagem);\n        this._limpaFormulario();\n    }\n\n    _criaNegociacao() {\n        return new Negociacao(\n            DateHelper.convertStringToData(this._data.value),\n            this._quantidade.value,\n            this._valor.value\n        );\n    }\n\n    _limpaFormulario() {\n        this._data.value = '';\n        this._quantidade.value = 1;\n        this._valor.value = 0.0;\n\n        this._data.focus();\n    }\n\n    deletaNegociacoes() {\n        this._listaNegociacoes.deletaNegociacoes();\n        this._mensagem.setTexto('Negociações apagadas com sucesso');\n        this._updateNegociacaoView(this._listaNegociacoes, this._mensagem);\n    }\n\n    _updateNegociacaoView(listaNegociacoes, mensagem) {\n        this._negociacoesView.update(listaNegociacoes);\n        this._mensagemView.update(mensagem);\n    }\n\n}"]}