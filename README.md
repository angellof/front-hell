
![NodeJs](https://cdn.pixabay.com/photo/2015/04/23/17/41/node-js-736399_960_720.png)


---

#### *JavaScritp*

 - [JavaScript 00](https://cursos.alura.com.br/course/javascript-padroes-abordagem-funcional)

 - [JavaScritp 01](https://cursos.alura.com.br/course/javascript-es6-orientacao-a-objetos-parte-1)

 - [JavaScritp 02](https://cursos.alura.com.br/course/javascript-es6-orientacao-a-objetos-parte-2)

 - [JavaScritp 03](https://cursos.alura.com.br/course/javascript-es6-orientacao-a-objetos-parte-3)

---

#### *React*

- [Webpack](https://cursos.alura.com.br/course/webpack)

- [React 01](https://cursos.alura.com.br/course/react)

- [React 02](https://cursos.alura.com.br/course/react-parte-2)

- [React 03](https://cursos.alura.com.br/course/react-parte-3)

---


#### *TypeScript*

 - [TypeScript 01](https://cursos.alura.com.br/course/typescript-parte1)

 - [TypeScript 02](https://cursos.alura.com.br/course/typescript-parte2)
 
 - [Build a API with Node and Typescript](https://www.sitepoint.com/how-to-use-typescript-to-build-a-node-api-with-express/?fbclid=IwAR19W-M72lvxFEv6jzMD0L_y08ZlehJ1YOMLYUkopitkq6TqwzST1_9uv0A) 
 
---

#### *NodeJS*

  - [NodeJS](https://cursos.alura.com.br/course/nodejs-avancado)
  - [Videos / Info sobre NodeJS](https://github.com/angelozero/nodejs-README/blob/master/README.md)
  - [Documentação NodeJS](https://nodejs.org/en/docs/)
  - [Curso Completo do Desenvolvedor NodeJS e MongoDB](https://www.udemy.com/curso-completo-do-desenvolvedor-nodejs/)
  - [Aplicações web na prática com Javascript e Node.js](https://www.udemy.com/aplicacoes-web-na-pratica-javascript-nodejs/)
  - [Introdução ao Node JS + Express](https://www.udemy.com/introducao-ao-node-js-express/)
  - [API REST em Node.JS aplicando testes (TDD) desde o princípio](https://www.udemy.com/api-rest-nodejs-com-testes/)
  - [Criando API's RESTful utilizando TypeScript, Node e mongoDB](https://www.udemy.com/criando-apis-restful-utilizando-typescript-node-e-mongodb/)
  -[Ionic 3 - Construindo um App estilo food com NodeJS](https://www.udemy.com/ionic-construindo-um-app-estilo-food-com-nodejs/)
  - [Udemy - Cursos Gratuitos de NodeJS](https://www.udemy.com/courses/search/?src=ukw&q=node&p=1&price=price-free)
  - [Gulp + Express + NodeJS](https://www.youtube.com/watch?v=s5S_5slvNGA)

----

*Certificação*

- [ ] [Certificação oficial de desenvolvedor NodeJS](https://www.infoq.com/br/news/2017/12/Node-certified-developer-exam)

- [ ] [Estudo para certificação](https://github.com/nodejs-certified-developer/certification)

- [ ] [Ceritificação NodeJS](https://foundation.nodejs.org/resources/certification)

----

*Info sobre NodeJS*

- [ ] [Node.js, TC-39, and Modules](https://hackernoon.com/node-js-tc-39-and-modules-a1118aecf95e)
- [ ] [How the module system, CommonJS & require works](https://blog.risingstack.com/node-js-at-scale-module-system-commonjs-require/)
- [ ] [Tips for NodeJS 2018](https://blog.risingstack.com/node-js-development-tips-2018/)
- [ ] [4 Regras para Entender o ‘this’ no JavaScript](https://blog.dmatoso.com/javascript-this-71dd763aad52)
- [ ] [Blog sobre NodeJS](https://blog.risingstack.com/)
- [ ] [Seja um desenvolvedor melhor](https://medium.com/@jonathanf07/seja-um-desenvolvedor-melhor-siga-esses-princ%C3%ADpios-66a12663cbe9)
- [ ] [Boilerplate - NodeJs](https://github.com/sahat/hackathon-starter)
- [ ] [13 boas práticas de Node JS](https://nodewebapps.com/2017/01/03/13-security-best-practices-for-your-web-application/)
- [ ] [Melhores Práticas em Produção: Segurança](http://expressjs.com/pt-br/advanced/best-practice-security.html)
- [ ] [Praticas em Producao](https://www.joyent.com/node-js/production)
- [ ] [Node.js Production best practices: performance, reliability and stability](http://maxprog.net.pl/node-js/node-js-production-best-practices-performance-reliability-and-stability/)
- [ ] [Melhores Práticas de Produção: desempenho e confiabilidade](http://expressjs.com/pt-br/advanced/best-practice-performance.html)
- [ ] [Checklist: Node.JS production best practice](http://goldbergyoni.com/checklist-best-practice-of-node-js-in-production/)
- [ ] [O que exatamente é o Node.js?](https://imasters.com.br/artigo/22016/javascript/o-que-exatamente-e-o-nodejs/)
- [ ] [Middlewares](http://expressjs.com/pt-br/guide/using-middleware.html)
- [ ] [5 Tips and Thoughts on Async / Await Functions](https://start.jcolemorrison.com/5-tips-and-thoughts-on-async-await-functions/)

----

*Vídeos e Tutoriais*

- [ ] [Algoritimos](https://www.youtube.com/playlist?list=PLHz_AreHm4dmSj0MHol_aoNYCSGFqvfXV)
- [x] [Curso Node JS Completo MVC (47 vídeos)](https://www.youtube.com/user/Jua0o0o/playlists?view=50&sort=dd&shelf_id=11)
- [ ] [Node.js - por Rodrigo Branas (8 vídeos)](https://www.youtube.com/playlist?list=PLQCmSnNFVYnTFo60Bt972f8HA4Td7WKwq)
- [ ] [Primeiros passos com Node.js (3 vídeos)](https://www.youtube.com/watch?v=gq9uGdZCKxI&list=PLRie4206YnP1LQfS--zYFSLAcSARduyrj)
- [ ] [Curso de Node JS - por Hugo Vasconcelos (10 vídeos)](https://www.youtube.com/watch?v=TuT46v8C-so&list=PLxNM4ef1Bpxgxa-Bgt9leCE1euHC14WI9)
- [ ] [Node.js API testável (17 vídeos)](https://www.youtube.com/playlist?list=PLz_YTBuxtxt74aOA2W8ArqZpsPlxP-JC9)
- [ ] [Vídeo: Desenvolvendo um chat usando NodeJS, Socket.io e jQuery](https://www.devmedia.com.br/desenvolvendo-um-chat-usando-nodejs-socket-io-e-jquery/31082)
- [ ] [Node.js Tutorial For Absolute Beginners](https://www.youtube.com/watch?v=U8XF6AFGqlc)
- [ ] [Node.js - Express, noções básicas](https://www.youtube.com/watch?v=wVo-UMit5Ig)
- [ ] [Tutorial CRUD em Node.js com driver nativo do MongoDB](http://www.luiztools.com.br/post/tutorial-crud-em-node-js-com-driver-nativo-do-mongodb/)
- [ ] [Escola de estudo NodeJS](https://nodeschool.io/pt-br/)
- [ ] [Curso Avançado de NodeJS](https://app.pluralsight.com/player?name=nodejs-advanced-m0&mode=live&clip=0&course=nodejs-advanced&author=samer-buna)
- [ ] [Curso Node - DevMedia](https://www.devmedia.com.br/curso/curso-de-node-js-primeiros-passos/1482)
- [ ] [NodeJS + Typescript](http://mherman.org/blog/2016/11/05/developing-a-restful-api-with-node-and-typescript/#.Wqgbc3XwaP8)
- [ ] [W3Schools](https://www.w3schools.com/nodejs/)
- [ ] [Gulp + NodeJS + Express + Mongo](https://www.youtube.com/watch?v=s5S_5slvNGA)
- [ ] [SQL no Docker](https://www.youtube.com/watch?v=skx_Oxdw9i0)
- [ ] [Mongo no Docker](https://www.youtube.com/watch?v=_pWnGGjaELY&list=PLxTkH01AauxT-HAd4roFmRi4JQiLPqYCf)
- [x] [Clean Architecture in Node.js](https://www.youtube.com/watch?v=CccZCy4eth4)
- [ ] [NodeJs: Writing Clean Asynchronous Code](https://www.youtube.com/watch?v=Jdm_OZCt1i0)
- [ ] [Curso 3 horas Node for begginers](https://www.youtube.com/watch?v=RLtyhwFtXQA)


---

#### *Free API's Rest for test*
  - [API Rest](https://reqres.in/)
  - [Public API's ( OATH / No OAUTH / ApiKey )](https://github.com/toddmotto/public-apis) 

### *Extra*
 - [Felippe Nardi - Efeitos em JS](https://github.com/felippenardi?tab=repositories)
 - [Lottie React Web](https://github.com/felippenardi/lottie-react-web)
 - [Monstro das Neves, animação para login](https://dribbble.com/shots/4249163-Animated-login-form-avatar)
 
 
 ---
 
 ![NodeJS](https://upload.wikimedia.org/wikipedia/commons/7/7e/Node.js_logo_2015.svg)


----

### O que é NodeJs ?

O Node.js é uma plataforma, ou um ambiente de execução para códigos javascript escrita em cima da engine de Javascript do Chrome, a V8. Ele é todo baseado em eventos e suas operações são não-bloqueantes, o que lhe confere bastante eficiência e leveza.

----
#### Como atualizar a versão do Node

```javascript
// x = numero da versão
sudo n x.x.x 
```

----

### Exemplo de uma função assíncrona

```javascript
function resolverDepoisDe2Segundos(x) {
    return new Promise(resolve => {
        setTimeout(() => {
            resolve(x);
        }, 2000);
    });
}

async function adicionar1(x) {
    console.log('ANTES DO 1')
    var a = resolverDepoisDe2Segundos(20);
    var b = resolverDepoisDe2Segundos(30);
    console.log('DEPOIS DO 1\n')
    return x + await a + await b;
}


async function adicionar2(x) {
    console.log('ANTES DO 2')
    var a = await resolverDepoisDe2Segundos(20);
    var b = await resolverDepoisDe2Segundos(30);
    console.log('DEPOIS DO 2')
    return x + a + b;
}


// adicionar1(10).then(v => {
//     console.log(v);  
// });

// adicionar1(10).then(v => {
//     console.log(v);  
// });

adicionar2(10).then(v => {
    console.log(v);
});
adicionar2(10).then(v => {
    console.log(v);
});
```

*Output método ```adicionar1()```*
```
ANTES DO 1
DEPOIS DO 1

ANTES DO 1
DEPOIS DO 1
( 2 secs ... )
60
60
```

*Output método ```adicionar2()```*
```
ANTES DO 2
ANTES DO 2
( 2 secs ... )
DEPOIS DO 2
DEPOIS DO 2
60
60
```

----

###  Criando um servidor web

Para criarmos um servidor web que consiga escutar as solicitações do cliente, podemos usar uma das bibliotecas disponíveis no Node.js, a ```http```.

O ```require()``` é uma função dentro do Node.js que importa tudo o que necessitamos.
Feito isso podemos invocar um método a partir da variável ```http``` cujo nome é ```createServer()```, que criará o servidor. 

Quando invocamos o ```createServer``` ele até cria um objeto que representa o servidor, só que não o "levanta" para escutar as solicitações feitas a partir do navegador. Para fazer isso vamos adicionar o ```var server``` que recebe o ```http.createServer```.

A partir da variável ```server```, invocamos o método server.listen(). Nele informamos exatamente a porta que queremos escutar, a porta ```3000```.

Ainda assim nada será carregado no navegador. Para que o servidor responda, precisamos passar como parâmetro para o método ´´´createServer()´´´ uma função anônima que recebe dois parâmetros, um de requisição ```req``` e um de resposta ```res```.

```javascript
var http = require('http');
var porta = 3000;
var ip = "localhost";

var server = http.createServer(function(req, res) {
    console.log("Recebendo request");
    res.writeHead(    200, {'Content-Type': 'text/html'});
    res.end('<html><body>Request recebido!</body></html>');
});

server.listen(porta, ip);

console.log("Server running at http://" + ip + ":" + porta + "/");
```

----

### Express

Info sobre [Express](http://expressjs.com/).

Express é uma biblioteca JavaScript construída sobre o módulo HTTP do Node.js, que fornece uma maneira mais simples de lidar com as requisições.

Comando inicial para criar um projeto base com express 

```javascript
$ https://expressjs.com/pt-br/starter/generator.html
```


```javascript
$ express --view=pug myapp
```

Após a criação do projeto base execute os comandos


```javascript
$ npm install
```

e

```javascript
$ npm install ejs
```

Finalizando, vá ate o arquivo app.js e insira as linhas

```javascript
app.set('view engine', 'ejs');
```

e esta para ver o servidor rodando na porta 3000


```javascript
app.listen(3000, function(){
    console.log("Servidor rodando");
});
```

Agora crie um arquivo dentro da pasta views chamado ```ìndex.ejs``` 

Altere o arquivo index.js para 

```javascript
var express = require('express');
var router = express.Router();

/* GET home page. */
router.get('/', function(req, res, next) {
  res.render('index', { title: 'Express', user: 'Angelo' });
});

module.exports = router;

```

E insria no ```ìndex.ejs```  as seguintes linhdas

```html
<html>
  <head><title><%= title %></title></head>
  <body>
    welcome <%= user%>
  </body>
</html>
```

[info](https://expressjs.com/pt-br/starter/generator.html)

----

### NPM

Info sobre [NPM](https://www.npmjs.com/).

NPM é o nome reduzido de Node Package Manager (Gerenciador de Pacotes do Node). A NPM é duas coisas: Primeiro, e mais importante, é um repositório online para publicação de projetos de código aberto para o Node.js; segundo, ele é um utilitário de linha de comando que interage com este repositório online, que ajuda na instalação de pacotes, gerenciamento de versão e gerenciamento de dependências.

O npm é o gerenciador de pacotes do ecosistema Node. Ele tem a função de gerenciar os projetos e pacotes javascript externos que precisemos utilizar em cada aplicação. Quando o Node é instalado, o npm também já vem por default e com certeza será muito útil em qualquer projeto desenvolvido sobre o Node, visto que é muito comum que se precise de libs externas para facilitar o desenvolvimento de certas funcionalidades. O próprio npm possui diversas bibliotecas que podem ser integradas com o Node. O npm consegue, portanto ajudar na instalação de pacotes, na execução de algumas tarefas dentro do ambiente do Node e como repositório de bibliotecas.

----


### Utilizando o Express

Começaremos importando o módulo do Express com a função ```require('express');```.

Quando importamos o Express, ele nos retornar um função não inicializada. Vamos invocar a função ```express()``` e armazenar o retorno em uma variável chamada ```app```.

Com a função invocada, o objeto que representa o Express foi criado. Agora podemos subir o servidor chamando o método listen() do objeto app. Passaremos dois parâmetros para o método, a porta que o servidor vai escutar, no caso a porta 3000 e uma função anônima. Dentro da função anônima colocaremos um console.log("servidor rodando") para mostrar que o servidor está rodando.

 - O método GET
    O método GET recebe como parâmetros o endereço que queremos atender e uma função anônima que recebe os argumentos req (request) e res (response).
    Dentro da função anônima do método get(), invocamos o método do response res.send(). No método send() passamos a reposta para o usuário, no caso, passaremos o ```<html><body><h1>Listagem de produtos</h1></body></html>``` .
    
```javascript
var express = require('express');
var app = express();

app.get('/produtos', function(req,res){
  res.send("<html><body><h1>Listagem de produtos</h1></body></html>");
});

app.listen(3000,function(){
    console.log("servidor rodando");
});
```
----

### Utilizando o EJS (Embedded JavaScript)

Após a instalação do ejs ```npm install ejs --save```, no arquivo app.js, vamos trocamos o método res.send() pelo res.render(). Passamos para o render() o caminho das páginas que ele vai renderizar, como vamos criar uma pasta "produtos" e dentro colocaremos a página "lista", passamos a string "produtos/lista".

O express se integra com os mecanismos de templates de páginas dinâmicas. Através da variável app, que guarda o objeto do Express, chamaremos o método set(). O set() é usado para definirmos variáveis para dentro do Express, que passem por todo o sistema.

O express espera uma string cujo nome é view engine. Como nós estamos utilizando um framework temos que nos adaptar as suas exigências. Assim como escrevemos view engine nós devemos passar também o nome da engine, no caso, o ejs.

Criaremos então um diretório que se chama ```views``` e dentro dele vamos criar um arquivo cujo nome será lista.ejs. Nesse arquivo nós colocaremos o código HTML da página.


```javascript
var express = require('express');
var app = express();

app.set('view engine', 'ejs');

app.get('/produtos', function(req, res){
    res.render('produtos/lista');
});

app.listen(3000, function(){
    console.log("Servidor rodando");
});
```

```html
<html>
    <body>
        <table>
            <tr>
                <td>Id</td>
                <td>Nome</td>
            </tr>
            <tr>
                <td>1</td>
                <td>Node.js e Express</td>
            </tr>
        </table>
    </body>
</html>
```
----

### Isolando as configurações do Express

Em um arquivo separado coloque as seguintes configurações: app recebendo o require do express , atribua a app a engine e o tipo da view e por fim exporte a variavel app.

```javascript
var app = require('express')();
app.set('view engine', 'ejs');

module. exports = function() {
    return app;
}

// app.js

var app = require('./config/express')();

app.get('/produtos', function(req, res){
    res.render('produtos/lista');
});


app.listen(3000, function(){
    console.log("Servidor rodando");
});
```

---

### O que é a CommonJS?

CommonJS é uma convenção para carregamentos de módulos javascript em aplicações server-side. O objeto que o node disponibiliza é o module e a função é passada para o atributo exports desse objeto.

---

### Criando uma conexão e consultando o banco de dados

A primeira coisa que precisamos é do drive do MySQL ```var mysql = require('mysql')```
Mas antes de consultar algo, precisamos conectar com o banco de dados. Através da variável ```mysql``` podemos chamar o ```método createConnection();```
O método createConnection() recebe diversos argumentos para realizar a conexão, como o servidor, o usuário, a senha e o nome do banco de dados. 
Usando o objeto ```connection``` chamamos o método ```query()``` passando como parâmetro a string ```'select * from livros'```.
Diferente de linguagens como Java, Python, Php ou Ruby, em uma consulta com sistemas externos, nós não armazenamos o resultado em uma variável. Além do parâmetro da query, precisamos passar uma função que será chamada após o término da consulta.
A função nós passamos dois parâmetros, um para erros ```err```, e outro para resultado ```results```.
Com o resultado em mãos, pegamos a variável de response ```res``` e chamamos o método ```send()``` passando o results como parâmetro.
Não podemos esquecer de fechar a conexão com o banco de dados com o ```connection.end();```. 

```javascript
module.exports = function(app){
    app.get('/produtos',function(req,res)){
        var mysql = require('mysql');
        var connection = mysql.createConnection({
            host : 'localhost',
            user : 'root',
            password : '',
            database : 'casadocodigo_nodejs'
        });

        connection.query('select * from produtos',function(err,results){
            res.send(results);

        });

        connection.end();
    });
}
```

---

### Isolando a criação da conexão com o banco de dados

Primeiro retiramos o require('mysql') e todo o createConnection() de código do arquivo produtos.js e colocar em outro arquivo.
Então vamos criar uma variável fora de todas as funções chamada dbConnection que recebe um require('../infra/dbConnection');. A variável connection, em vez de receber o retorno do mysql, retornamos a chamada da função dbConnection.

```javascript

// arquivo ../infra/dbConnection.js

var mysql = require('mysql');
module.exports = function(){
    return mysql.createConnection({
                host:'localhost',
                user:'root',
                password:'',
                database:'casadocodigo_nodejs'
          });

}


// arquivo produtos.js com o import do sql

var dbConnection = require('../infra/dbConnection');
module.exports = function(app){
  app.get('/produtos',function(req,res)){

      var connection = dbConnection();

      connection.query('select * from produtos',function(err,results){
          res.send('produtos/lista', {lista:results});
      });

      connection.end();

  });
}

```

---

### Carregamento automático dos módulos - Usando o Express Load

Existe uma biblioteca que foi criada a partir dos desenvolvedores do Express que é a Express Load e ela realiza o carregamento automático das rotas.
O express.js deve fazer load de mais um módulo, que é o express-load, justamente para que ele faça o carregamento automático dos outros módulos que vamos adicionando ao projeto. 
Lembre que a ordem em que você carrega os módulos importa, pois as rotas precisam dos módulos da infra para funcionar. 
Além disso, um outro ponto importante é a presença do segundo parâmetro da função load(), onde passamos um json com um atributo cwd. Essa atributo indica que o express-load deve procurar arquivos para receberem os módulos carregados dentro da pasta app e não da raiz do projeto.

Alteramos também o arquivo produtos.js, visto que agora ele não precisa mais carregar o connectionFactory, mas sim passa a receber a connection a partir da variável que foi criada pelo express-load e que tem o nome do diretório raiz que informamos ao express-load.

```javascript
var express = require('express');
var load = require('express-load');

module.exports = function() {

    var app = express();
    app.set('view engine', 'ejs');
    app.set('views','./app/views');

    load('routes',{cwd: 'app'})
        .then('infra')
        .into(app);

    return app;

}
```

```javascript
module.exports = function(app) {
    app.get("/produtos",function(req, res) {

        var connection = app.infra.connectionFactory();

        connection.query('select * from produtos', function(err, results){
            res.render('produtos/lista', {lista: results});
        });

        connection.end();

    });
}
```

---

### Middlewares
Os Middlewares são funções cujo objetivo é possibilitar a interceptação do request e adicionar verificações e comportamentos sobre eles.

Vários plugins que utilizamos na aplicação junto do express fazem uso dos middlewares. É o caso do bodyparser ou do express-validator


Middlewaere customizado para erro 404
```javascript
app.use(function(req,res,next){
    res.status(404).render('erros/404');
    next();
});

```

Middlewaere customizado para erro 500

```javascript
app.use(function(error, req,res,next){
    res.status(500).render('erros/500');
    next();
});
```

---

